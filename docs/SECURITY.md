# Security

이 문서는 프로젝트의 보안 관련 정책, 취약점 대응 절차, 비밀(토큰) 관리 지침을 담고 있습니다.

## 취약점 대응 정책

- 정기 검사
  - `npm audit`를 주기적으로 실행합니다.
  - CI에서 `npm audit --json`을 주기적으로 실행해 경고를 수집할 것을 권장합니다.
- 우선순위
  1. 고·치명적(Critical/High) 취약점: 즉시 조사 및 패치. 필요 시 긴급 릴리스(rollback 포함).
  2. 중간/낮음(Moderate/Low): 영향 범위를 검토하고 정기 업데이트 주기에 포함.
- 수정 방법
  - `npm audit fix` 우선 시도.
  - `npm audit fix --force`는 메이저 업데이트를 수반하므로 변경 내용을 로컬에서 빌드/테스트해 호환성을 확인 후 커밋합니다.

## 비밀(시크릿) 관리

- 모든 토큰/API 키는 GitHub 리포지토리의 `Settings > Secrets and variables > Actions`에 저장합니다.
- 리포지토리/워크플로우 파일에 하드코딩 금지.
- 로컬 개발에서 필요 시 환경 변수 파일(`.env`)을 사용하되 절대 커밋 금지.(`.gitignore`에 등록)

## CI 보안 권장 사항

- 워크플로우 권한 최소화: 현재 권한은 `contents: write`, `pages: write`, `id-token: write`로 제한되어 있습니다.
- 외부 액션 사용 시 신뢰 가능한 액션을 사용하고 태그(sha)로 고정하여 공급망 공격 위험을 줄입니다.

## 취약점 발견 시 절차

1. 관련 이슈 생성(`security` 라벨)
2. 영향 범위(의존성, 사용 위치) 분석
3. 로컬에서 재현 및 패치(또는 의존성 업데이트)
4. PR로 변경사항 제출 및 CI 통과 확인
5. 배포 및 모니터링

## 감사 로그 및 기록

- 중요한 보안 변경(메이저 의존성 업그레이드, 롤백 등)은 `docs/MAINTENANCE.md`의 변경 기록 섹션과 커밋 메시지에 명시하십시오.

## 연락처

- 보안 이슈는 리포지토리 이슈로 우선 등록하고, 민감한 정보는 공개하지 마십시오.

## 자동 수리(권장 절차)

- 우선 `npm audit fix`를 실행해 자동으로 고쳐지는 항목을 적용합니다.
- 강제 업데이트(`npm audit fix --force`)는 메이저 업그레이드를 포함할 수 있으므로 별도의 브랜치에서 실행하고, 빌드와 테스트를 모두 통과해야 main에 병합합니다.

## 2025-08-24 Audit 요약

- `npm audit fix` 실행 결과: 일부 취약점(Moderate)이 남아 있으며, `npm audit fix --force`가 필요합니다.
- 남은 항목 예: `esbuild` 및 `micromatch` 관련 경고(상세는 `npm audit` 출력 참조).

권장: 자동 강제 업데이트 대신 수동으로 주요 의존성(vitest, vite, lint-staged 등)을 검토해 안전한 버전으로 업그레이드하고 CI에서 검증하는 것을 권장합니다.
